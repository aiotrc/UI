{% extends 'SmartCityPanelBundle:Common:base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
   integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
   crossorigin=""/>

    {% stylesheets   
        'bundles/smartcitypanel/assets/global/plugins/Leaflet.markercluster-1.0.6/dist/MarkerCluster.css'
        'bundles/smartcitypanel/assets/global/plugins/Leaflet.markercluster-1.0.6/dist/MarkerCluster.Default.css'
        filter='cssrewrite'
    %}
        <link rel="stylesheet" href="{{ asset_url }}"/>
    {% endstylesheets %}

    <style>
        #mapid { height: 400px; }
    </style>
{% endblock %}


{% block title %}
    {% trans from 'labels' %}label.sensor.map{% endtrans %}
{% endblock title %}

{% block body -%}

    <div class="page-bar">
        
        {% set breadcrumbs_items = 
            [
                ['label.sensor.map'|trans([], 'labels'), '#' ],
            ] 
        %}
        {{ toolbox.breadcrumbs(breadcrumbs_items) }}

        <div class="page-toolbar">
            <div class="btn-group pull-left">

            </div>
        </div>
    </div>
    <div id="mapid"></div>

    {# <div style="width:400px; height:200px;">
        <iframe src="http://localhost:5601/app/kibana#/dashboard/fc045f60-8783-11e7-93f6-e39dcb32a18e?embed=true&_g=()&_a=(description:'',filters:!(),options:(darkTheme:!f),panels:!((col:1,id:e0fc0dd0-8783-11e7-93f6-e39dcb32a18e,panelIndex:1,row:1,size_x:6,size_y:3,type:visualization)),query:(query_string:(analyze_wildcard:!t,query:'*')),timeRestore:!f,title:'New+Dashboard',uiState:(P-1:(vis:(defaultColors:('0+-+100':'rgb(0,104,55)')))),viewMode:view)" height="600" width="800"></iframe>
    </div> #}



{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
   integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
   crossorigin=""></script>

    {% javascripts
        
        'bundles/smartcitypanel/assets/global/plugins/Leaflet.markercluster-1.0.6/dist/leaflet.markercluster.js'
        'bundles/smartcitypanel/assets/global/plugins/Leaflet.markercluster-1.0.6/dist/geohash.js'
        'bundles/smartcitypanel/js/SensorMap.js'

        filter='?jsqueeze'
    %}
        <script src="{{ asset_url }}"></script>

    {% endjavascripts %}

{% endblock %}

{% block documentReady %}
    Monitoring.init()
{% endblock %}